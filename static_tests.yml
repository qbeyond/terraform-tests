jobs:
  - job: Run_tflint
    steps:
    - checkout: self
    - task: CmdLine@2
      inputs: 
        script: |
          echo Curl tflint_config_file

          curl -s https://raw.githubusercontent.com/qbeyond/terraform-tests/feature/init/.tflint.hcl -O
    - task: CmdLine@2
      inputs: 
        script: |
          echo Curl tflint

          curl -s https://raw.githubusercontent.com/terraform-linters/tflint/master/install_linux.sh | bash
    - task: CmdLine@2
      inputs:
        script: |
          echo init tflints

          tflint --init
    - task: CmdLine@2
      inputs:
        script: |
          echo start tflint

          tflint --recursive
  - job: Run_tfsec
    steps:
    - task: trivy@1
      inputs:
        version: 'latest'
        path: './'
